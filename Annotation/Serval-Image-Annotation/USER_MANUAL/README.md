![Tegu Logo](https://s2.ax1x.com/2019/01/30/kl6rzF.jpg)
# GIIA-Python
## Generalized Intelligence Image Annotator based on PyQt
## 泛化智能图像标注工具（Python版）用户手册

### 概述
泛化智能图像标注工具（ Generalized Intelligence Image Annotator，以下简称GIIA）是TeguCV 的一个配套工具，用于为计算机视觉方向的深度学习模型提供标注数据。该工具能以可视化的形式，帮助用户方便快捷地为深度学习模型准备经过标注的图像数据。该工具目前已在 Windows 10 1803 x64 平台测试通过。

本软件要求屏幕分辨率不小于 1024X768 。


### 功能

* 读取文件夹中的文件，进行图片标注
* 支持同时添加多个文件夹
* 支持自定义多个标签
* 支持将未完成的标注储存为工程文件，工程文件(`*.json`)与标注文件(`*.serval`)将分开储存
* 对标注文件(`*.serval`)进行加密和解密——开源版GIIA使用的加密秘钥位于`config/defaults.py`中，默认设置为`GIIA-py-opensource`
* 将标注图像和标注文件打包成`*.zip`格式的压缩文件，便于上传——该功能依赖外部的`7z.exe`，位于`model/7zfiles`文件夹中

### 使用说明
#### 新建项目
软件启动之后，主界面如图所示：
//main.png

下方白色区域将显示最近打开的项目（如果有），若想打开这些项目，直接双击对应项即可。点击“新建项目”按钮，即可建立新的项目。
//newproj.png

点击“添加图片路径”按钮，可以添加一个文件夹中的所有图片到工作区中——软件会递归搜索该文件夹的所有子文件夹。侧面将显示当前已找到的图片总数。
//addfolder.png

下方区域是标签区，点击“添加标签”即可增加一个新的标签，标签默认以`Label-X`命名，用户可以根据需要，直接自行修改标签的名字。
//addlabel.png

若要删除已有标签，可点击对应标签的数字，选中要删除的标签，然后点击下方的“删除标签”按钮。

#### 标注界面
在添加完图片和标签之后，即可点击“开始标注”按钮，进入标注工作区。注意**开始标注之前必须添加图片和标签**。工作区主界面如下图所示：
//workspace.png

为了方便用户使用，软件提供了一些针对各个功能的快捷键，右侧“快捷键”选项卡显示了这些快捷键的具体内容。


左侧界面显示用户图片的具体内容——点击下方的`+`和`-`按钮，可以放大或缩小图片，点击正中央的`1:1`按钮，可以让图片恢复原始显示尺寸。

下方文本框会显示当前标注区域的对角坐标和鼠标指针当前的坐标，可供参考。

点击右侧界面的“项目资源”选项卡，可以显示当前加载的所有图片（此处显示绝对路径）。在指定图片上双击可跳转至指定图片。若需要选择下一张或上一张图片，点击“下一张”`Next`或“上一张”`Prev`按钮即可。

界面中间位置列举了此前添加的所有标签，点击最上方的“跳过”`Skip`按钮可以跳过当前图片。

#### 开始进行标注
在需要标注的图片上，点击界面中间位置的对应标签的按钮，即可切换到标注状态。将鼠标移动到工作区，在要进行标注的区域拖拽，即可新建一个标注区：
//annotating.png

若需要更改某一个标注区的位置，可以直接使用鼠标对其进行拖拽。点击某个标注区，拖拽其周围的黑色控制块，可以改变它的大小。
//adjust.png

若想要删除某一个标注区，可以点击右侧的“删除”`Delete`键，即可进入删除模式。此时图片上的所有标注区右上角都会多出一个叉号按钮。点击该按钮，即可删除对应的标注区。
//delete.png

若想跳过当前图片，可以点击上方的“跳过”`Skip`按钮，此时该图片的所有标注区都将被清空，效果如下所示：
//skip.png

点击“保存”`Save`按钮，可以保存到指定的`*.serval`文件中。此外也可以指定保存`*.json`工程文件。工程文件中只包括图片文件夹和标签的信息，不包括标注数据。
//产品逻辑是否修改？
#### 打开已有的工程
在主界面点击“打开项目文件”按钮，可以选择加载已有的`*.json`项目文件。若已有`*.serval`文件，则可以一并加载。完成加载之后即可恢复此前已有的所有文件、标签和标注信息。


#### 将标注数据打包
若需要标注数据具有可移动性，则可以对标注数据进行打包，将图片文件和标注文件打包进一个`*.7z`文件中。在主界面点击“打包”即可进入打包上传界面。
//upload.png

- 点击“选择Serval文件”按钮，可以载入一个标注文件。软件将自动搜索标注文件中标注的所有图片文件，请**确保这些文件没有被移动或删除**。
- 点击“选择7z程序位置”按钮，选择调用外部的`7z.exe`的位置。本项目自带的`7z.exe`文件在`model/7zfiles`目录下。
- 点击“选择保存文件位置”按钮，选择保存压缩包的位置。

//added.png

- 最后，点击“打包”即可开始进行打包。若图片文件较多，则会需要比较长的时间，请耐心等待，并确保打包文件保存的位置有足够的存储空间。

打包完成之后如下图所示：
//packdone.png

#### 标注文件和打包文件结构说明







